(this["webpackJsonpset-game"]=this["webpackJsonpset-game"]||[]).push([[0],{12:function(e,t,a){e.exports=a(27)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n,r,c,s=a(0),l=a.n(s),i=a(8),o=a.n(i),u=(a(17),a(18),a(2)),f=a(3),d=(a(19),function(e){var t=e.card,a=e.isSelected,n=e.onSelect;return l.a.createElement("div",{className:"card "+(a?"selected":""),onClick:function(){return n(!a)}},function(){for(var e=[],a=0;a<t.amount;a++){var n=["item",t.color,t.shape,t.style].join(" ").toLowerCase();e.push(l.a.createElement("div",{className:n,key:n+a}))}return e}())}),m=(a(20),a(5)),h=a(6);function E(){var e=[{}];return e=p(e,"amount",[1,2,3]),e=p(e,"color",[n.BLUE,n.RED,n.GREEN]),e=p(e,"shape",[r.SQUARE,r.CIRCLE,r.ROMB]),e=p(e,"style",[c.EMPTY,c.FILL,c.STRIPE]),e.sort((function(){return Math.random()-.5}))}function v(e){return b(e,"amount")&&b(e,"color")&&b(e,"shape")&&b(e,"style")}function b(e,t){var a=e.map((function(e){return e[t]})),n=new Set(a);return 1===n.size||n.size===e.length}function p(e,t,a){return e.map((function(e){return a.map((function(a){return Object(h.a)(Object(h.a)({},e),Object(m.a)({},t,a))}))})).flat(1/0)}!function(e){e.RED="RED",e.GREEN="GREEN",e.BLUE="BLUE"}(n||(n={})),function(e){e.CIRCLE="CIRCLE",e.SQUARE="SQUARE",e.ROMB="ROMB"}(r||(r={})),function(e){e.EMPTY="EMPTY",e.FILL="FILL",e.STRIPE="STRIPE"}(c||(c={}));var O=a(9),C=a(10),S=new(function(){function e(){Object(O.a)(this,e),this.allCards=[],this.playedCards=[],this.cardsOnTable=[],this.nextSet=[]}return Object(C.a)(e,[{key:"startGame",value:function(){this.allCards=E(),this.cardsOnTable=this.allCards.splice(0,12),this.recalculateNextSet(),0===this.nextSet.length&&this.startGame()}},{key:"removeSelectedCards",value:function(e){var t=this;e.forEach((function(e,a){t.playedCards.push(t.cardsOnTable[e-a]),t.cardsOnTable.splice(e-a,1)})),this.recalculateNextSet()}},{key:"drawMoreCards",value:function(){if(this.anyCardsLeft)for(this.cardsOnTable.length<12&&this.drawCards(3);0===this.nextSet.length&&this.anyCardsLeft;)this.drawCards(1)}},{key:"drawCards",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(e=this.cardsOnTable).push.apply(e,Object(u.a)(this.allCards.splice(0,t))),this.recalculateNextSet()}},{key:"recalculateNextSet",value:function(){this.nextSet=function(e){for(var t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)for(var n=a+1;n<e.length;n++)if(v([e[t],e[a],e[n]]))return[t,a,n];return[]}(this.cardsOnTable),console.log(this.nextSet)}},{key:"anyCardsLeft",get:function(){return this.allCards.length>0}}]),e}()),g=a(11),w=a.n(g),T=(a(26),function(e){var t=e.isModalVisible,a=e.setIsModalVisible;return l.a.createElement(w.a,{visible:t,width:"400",height:"300",effect:"fadeInDown",onClickAway:function(){return a(!1)}},l.a.createElement("div",{className:"popup"},l.a.createElement("h1",null,"How to play"),l.a.createElement("p",null,"This is an online version of SET game"),l.a.createElement("p",null,"You can find official rules ",l.a.createElement("a",{href:"https://www.ultraboardgames.com/set/game-rules.php",target:"_blank",rel:"noopener noreferrer"}," here")),l.a.createElement("span",{className:"close",onClick:function(){return a(!1)}},"X")))}),N=function(){var e=Object(s.useState)([]),t=Object(f.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1],m=Object(s.useState)(!1),h=Object(f.a)(m,2),E=h[0],b=h[1],p=Object(s.useState)(!1),O=Object(f.a)(p,2),C=O[0],g=O[1];Object(s.useEffect)((function(){w()}),[]),Object(s.useEffect)((function(){3===i.length&&(v(i.map((function(e){return a[e]})))?setTimeout((function(){S.removeSelectedCards(i),o([]),setTimeout((function(){S.drawMoreCards(),n(Object(u.a)(S.cardsOnTable))}),500)}),500):setTimeout((function(){o([])}),500))}),[i,a]),Object(s.useEffect)((function(){b(0===S.nextSet.length)}),[a]);var w=function(){S.startGame(),n(S.cardsOnTable)};return l.a.createElement("div",{className:"game"},l.a.createElement("div",{className:"header"},l.a.createElement("h1",null,"Set game"),l.a.createElement("div",{className:"btn-container"},l.a.createElement("div",{className:"info"},"Cards left: ",S.allCards.length),l.a.createElement("button",{className:"btn",onClick:function(){return g(!0)}},"HOW TO"),!E&&l.a.createElement("button",{onClick:function(){var e=S.nextSet;e.length&&o(e)},className:"btn"},"HELP ME!"),E&&l.a.createElement("button",{onClick:w,className:"btn"},"RESTART"))),l.a.createElement("div",{className:"cards-container"},a.map((function(e,t){return l.a.createElement(d,{key:t,card:e,isSelected:i.indexOf(t)>-1,onSelect:function(e){return a=e,n=t,void(-1===i.indexOf(n)&&a?o([].concat(Object(u.a)(i),[n])):o(i.filter((function(e){return e!==n}))));var a,n}})})),E&&l.a.createElement("div",{className:"gameOver"},l.a.createElement("div",{className:"stamp"},"Game over"))),l.a.createElement(T,{isModalVisible:C,setIsModalVisible:g}))};var y=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.fc97a889.chunk.js.map