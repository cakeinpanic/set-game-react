(this["webpackJsonpset-game"]=this["webpackJsonpset-game"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(26)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r,i,c=n(0),l=n.n(c),s=n(6),o=n.n(s),u=(n(15),n(16),n(1)),d=n(3),f=(n(17),n(4)),m=n.n(f),h=function(e){var t=e.style,n=e.isRemoving,a=e.card,r=e.isSelected,i=e.onSelect,c=e.isHighlighted,s=m()("card",{selected:r},{highlighted:c},{removing:n});return l.a.createElement("div",{className:s,onClick:function(){return i(!r)},style:t},function(){for(var e=[],t=0;t<a.amount;t++){var n=m()("item",a.color,a.shape,a.style);e.push(l.a.createElement("div",{className:n,key:n+t}))}return e}())},v=(n(18),n(2));function p(){var e=[{}];return e=O(e,"amount",[1,2,3]),e=O(e,"color",[a.BLUE,a.RED,a.GREEN]),e=O(e,"shape",[r.SQUARE,r.CIRCLE,r.ROMB]),e=O(e,"style",[i.EMPTY,i.FILL,i.STRIPE]),e.sort((function(){return Math.random()-.5}))}function b(e){return 3===e.length&&E(e,"amount")&&E(e,"color")&&E(e,"shape")&&E(e,"style")}function E(e,t){var n=e.map((function(e){return e&&e[t]})),a=new Set(n);return 1===a.size||a.size===e.length}function O(e,t,n){return e.map((function(e){return n.map((function(n){return Object(u.a)(Object(u.a)({},e),Object(v.a)({},t,n))}))})).flat(1/0)}!function(e){e.RED="red",e.GREEN="green",e.BLUE="blue"}(a||(a={})),function(e){e.CIRCLE="circle",e.SQUARE="square",e.ROMB="romb"}(r||(r={})),function(e){e.EMPTY="empty",e.FILL="fill",e.STRIPE="stripe"}(i||(i={}));var g=n(7),S=n(8),C=new(function(){function e(){Object(g.a)(this,e),this.allCards=[],this.playedCards=[],this.cardsOnTable=[],this.nextSet=[]}return Object(S.a)(e,[{key:"startGame",value:function(){this.allCards=p(),this.cardsOnTable=this.allCards.splice(0,12),this.recalculateNextSet(),0===this.nextSet.length&&this.startGame()}},{key:"replaceSelectedCards",value:function(e){this.removeSelectedCards(e),this.replaceRemovedCardsWithNew()}},{key:"removeSelectedCards",value:function(e){var t=this;e.forEach((function(e,n){t.playedCards.push(t.cardsOnTable[e]),t.cardsOnTable.splice(e,1,null)})),this.recalculateNextSet()}},{key:"replaceRemovedCardsWithNew",value:function(){if(this.anyCardsLeft){for(this.cardsOnTable.length<15&&this.drawCards(3);0===this.nextSet.length&&this.anyCardsLeft;)this.drawCards(1);this.cardsOnTable=this.cardsOnTable.filter((function(e){return null!==e}))}}},{key:"drawCards",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++){var n=this.allCards.splice(0,1)[0],a=this.cardsOnTable.indexOf(null);a>-1?this.cardsOnTable[a]=n:this.cardsOnTable.push(n)}this.recalculateNextSet()}},{key:"recalculateNextSet",value:function(){this.nextSet=function(e){for(var t=0;t<e.length;t++)if(e[t])for(var n=t+1;n<e.length;n++)if(e[n])for(var a=n+1;a<e.length;a++)if(e[a]&&b([e[t],e[n],e[a]]))return[t,n,a];return[]}(this.cardsOnTable),console.log(this.nextSet)}},{key:"anyCardsLeft",get:function(){return this.allCards.length>0}}]),e}()),T=n(9),j=n.n(T),y=(n(24),function(e){var t=e.isModalVisible,n=e.setIsModalVisible;return l.a.createElement(j.a,{visible:t,width:"400",height:"300",effect:"fadeInDown",onClickAway:function(){return n(!1)}},l.a.createElement("div",{className:"popup"},l.a.createElement("h1",null,"How to play"),l.a.createElement("p",null,"This is an online version of SET game"),l.a.createElement("p",null,"You can find official rules ",l.a.createElement("a",{href:"https://www.ultraboardgames.com/set/game-rules.php",target:"_blank",rel:"noopener noreferrer"}," here")),l.a.createElement("span",{className:"close",onClick:function(){return n(!1)}},"X")))}),R=(n(25),function(e){var t=e.cardsOnBoard,n=e.isGameOver,a=e.restartGame,r=e.hintSet,i=e.openHelp;return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header-content"},l.a.createElement("h1",null,"SET GAME"),l.a.createElement("div",{className:"btn-container"},l.a.createElement("div",{className:"info"},"CARDS LEFT: ",t),l.a.createElement("button",{className:"btn",onClick:i},"HOW TO"),!n&&l.a.createElement("button",{onClick:r,className:"btn"},"HELP ME!"),n&&l.a.createElement("button",{onClick:a,className:"btn"},"RESTART"))))}),N=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),s=i[0],o=i[1],f=Object(c.useState)(!1),m=Object(d.a)(f,2),v=m[0],p=m[1],E=Object(c.useRef)(null);Object(c.useEffect)((function(){O()}),[]),Object(c.useEffect)((function(){var e=n.filter((function(e){return e.isSelected&&!e.isRemoving}));3===e.length&&(clearTimeout(E.current),b(e.map((function(e){return e.card})))?(a(n.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{isRemoving:n[t].isSelected})}))),setTimeout((function(){var e=n.map((function(e,t){return e.isSelected&&!e.isRemoving?t:-1})).filter((function(e){return e>-1}));C.replaceSelectedCards(e),a(C.cardsOnTable.map((function(t,a){return{card:t,isSelected:!1,isHinted:!1,isAppearing:e.indexOf(a)>-1||a>=n.length}})))}),500)):setTimeout((function(){a(n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isSelected:!1})})))}),500))}),[n]),Object(c.useEffect)((function(){o(0===C.nextSet.length)}),[n]);var O=function(){C.startGame(),a(C.cardsOnTable.map((function(e){return{card:e,isSelected:!1,isHinted:!1}})))};return l.a.createElement("div",{className:"game"},l.a.createElement(R,{openHelp:function(){return p(!0)},hintSet:function(){return function(){var e=C.nextSet;if(e.length){var t=n.map((function(t,n){return Object(u.a)(Object(u.a)({},t),{},{isHinted:e.indexOf(n)>-1})}));a(t)}E.current=setTimeout((function(){var e=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isHinted:!1})}));a(e)}),2e3)}()},cardsOnBoard:C.allCards.length,restartGame:function(){return O()},isGameOver:s}),l.a.createElement("div",{className:"cards-container"},function(){var e=n.length>12?65:0;return n.map((function(t,r){if(null===t.card)return"";var i={top:(r<12?180*Math.floor(r/4):r%12*180)+"px",left:(r<12?r%4*130:520)-e+"px"};return l.a.createElement(h,{key:r,card:t.card,style:i,isRemoving:!!t.isRemoving,isSelected:t.isSelected,isHighlighted:t.isHinted,onSelect:function(e){return function(e,t){var r=n.map((function(n,a){return Object(u.a)(Object(u.a)({},n),{},{isSelected:a===t?e:n.isSelected,isHinted:!1})}));a(r)}(e,r)}})}))}()),s&&l.a.createElement("div",{className:"gameOver-stamp"},"Game over"),l.a.createElement(y,{isModalVisible:v,setIsModalVisible:p}))};var w=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.754ca6f8.chunk.js.map