(this["webpackJsonpset-game"]=this["webpackJsonpset-game"]||[]).push([[0],{12:function(e,t,n){e.exports=n(27)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a,r,c,l=n(0),i=n.n(l),s=n(8),o=n.n(s),u=(n(17),n(18),n(3)),f=n(1),d=(n(19),function(e){var t=e.style,n=e.card,a=e.isSelected,r=e.onSelect,c=e.isHighlighted,l=["card ",a?"selected":"",c?"highlighted":""].join(" ");return i.a.createElement("div",{className:l,onClick:function(){return r(!a)},style:t},function(){for(var e=[],t=0;t<n.amount;t++){var a=["item",n.color,n.shape,n.style].join(" ").toLowerCase();e.push(i.a.createElement("div",{className:a,key:a+t}))}return e}())}),h=(n(20),n(5)),m=n(6);function E(){var e=[{}];return e=O(e,"amount",[1,2,3]),e=O(e,"color",[a.BLUE,a.RED,a.GREEN]),e=O(e,"shape",[r.SQUARE,r.CIRCLE,r.ROMB]),e=O(e,"style",[c.EMPTY,c.FILL,c.STRIPE]),e.sort((function(){return Math.random()-.5}))}function b(e){return v(e,"amount")&&v(e,"color")&&v(e,"shape")&&v(e,"style")}function v(e,t){var n=e.map((function(e){return e&&e[t]})),a=new Set(n);return 1===a.size||a.size===e.length}function O(e,t,n){return e.map((function(e){return n.map((function(n){return Object(m.a)(Object(m.a)({},e),Object(h.a)({},t,n))}))})).flat(1/0)}!function(e){e.RED="RED",e.GREEN="GREEN",e.BLUE="BLUE"}(a||(a={})),function(e){e.CIRCLE="CIRCLE",e.SQUARE="SQUARE",e.ROMB="ROMB"}(r||(r={})),function(e){e.EMPTY="EMPTY",e.FILL="FILL",e.STRIPE="STRIPE"}(c||(c={}));var p=n(9),g=n(10),S=new(function(){function e(){Object(p.a)(this,e),this.allCards=[],this.playedCards=[],this.cardsOnTable=[],this.nextSet=[]}return Object(g.a)(e,[{key:"startGame",value:function(){this.allCards=E(),this.cardsOnTable=this.allCards.splice(0,12),this.recalculateNextSet(),0===this.nextSet.length&&this.startGame()}},{key:"removeSelectedCards",value:function(e){var t=this;e.forEach((function(e,n){t.playedCards.push(t.cardsOnTable[e]),t.cardsOnTable.splice(e,1,null)})),this.recalculateNextSet()}},{key:"replaceRemovedCardsWithNew",value:function(){if(this.anyCardsLeft){for(this.cardsOnTable.length<15&&this.drawCards(3);0===this.nextSet.length&&this.anyCardsLeft;)this.drawCards(1);this.cardsOnTable=this.cardsOnTable.filter((function(e){return null!==e}))}}},{key:"drawCards",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++){var n=this.allCards.splice(0,1)[0],a=this.cardsOnTable.indexOf(null);a>-1?this.cardsOnTable[a]=n:this.cardsOnTable.push(n)}this.recalculateNextSet()}},{key:"recalculateNextSet",value:function(){this.nextSet=function(e){for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)for(var a=n+1;a<e.length;a++)if(b([e[t],e[n],e[a]]))return[t,n,a];return[]}(this.cardsOnTable),console.log(this.nextSet)}},{key:"anyCardsLeft",get:function(){return this.allCards.length>0}}]),e}()),C=n(11),T=n.n(C),j=(n(26),function(e){var t=e.isModalVisible,n=e.setIsModalVisible;return i.a.createElement(T.a,{visible:t,width:"400",height:"300",effect:"fadeInDown",onClickAway:function(){return n(!1)}},i.a.createElement("div",{className:"popup"},i.a.createElement("h1",null,"How to play"),i.a.createElement("p",null,"This is an online version of SET game"),i.a.createElement("p",null,"You can find official rules ",i.a.createElement("a",{href:"https://www.ultraboardgames.com/set/game-rules.php",target:"_blank",rel:"noopener noreferrer"}," here")),i.a.createElement("span",{className:"close",onClick:function(){return n(!1)}},"X")))}),y=function(){var e=Object(l.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(l.useState)([]),c=Object(f.a)(r,2),s=c[0],o=c[1],h=Object(l.useState)([]),m=Object(f.a)(h,2),E=m[0],v=m[1],O=Object(l.useState)(!1),p=Object(f.a)(O,2),g=p[0],C=p[1],T=Object(l.useState)(!1),y=Object(f.a)(T,2),N=y[0],w=y[1];Object(l.useEffect)((function(){R()}),[]),Object(l.useEffect)((function(){console.log(n)}),[n]),Object(l.useEffect)((function(){3===s.length&&(b(s.map((function(e){return n[e]})))?setTimeout((function(){S.removeSelectedCards(s),o([]),a(Object(u.a)(S.cardsOnTable)),setTimeout((function(){S.replaceRemovedCardsWithNew(),a(Object(u.a)(S.cardsOnTable))}),500)}),500):setTimeout((function(){o([])}),500))}),[s,n]),Object(l.useEffect)((function(){C(0===S.nextSet.length)}),[n]);var R=function(){S.startGame(),a(Object(u.a)(S.cardsOnTable))};return i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"SET GAME"),i.a.createElement("div",{className:"btn-container"},i.a.createElement("div",{className:"info"},"CARDS LEFT: ",S.allCards.length),i.a.createElement("button",{className:"btn",onClick:function(){return w(!0)}},"HOW TO"),!g&&i.a.createElement("button",{onClick:function(){var e=S.nextSet;e.length&&v(e),setTimeout((function(){return v([])}),2e3)},className:"btn"},"HELP ME!"),g&&i.a.createElement("button",{onClick:R,className:"btn"},"RESTART"))),i.a.createElement("div",{className:"cards-container"},n.map((function(e,t){if(!e)return i.a.createElement("div",{key:t});var n={top:180*Math.floor(t/4)+"px",left:t%4*130+"px"};return i.a.createElement(d,{key:t,card:e,style:n,isSelected:s.indexOf(t)>-1,isHighlighted:E.indexOf(t)>-1,onSelect:function(e){return n=e,a=t,v([]),void(-1===s.indexOf(a)&&n?o([].concat(Object(u.a)(s),[a])):o(s.filter((function(e){return e!==a}))));var n,a}})})),g&&i.a.createElement("div",{className:"gameOver"},i.a.createElement("div",{className:"stamp"},"Game over"))),i.a.createElement(j,{isModalVisible:N,setIsModalVisible:w}))};var N=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.e137e9f5.chunk.js.map